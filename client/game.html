<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>NMB Game - Playable Prototype</title>
    <script src="https://cdn.socket.io/4.7.1/socket.io.min.js"></script>
    <link rel="stylesheet" href="game.css">
</head>
<body>
    <div class="game-container">
        <!-- Left Panel: Game Controls & Player Status -->
        <div class="left-panel">
            <!-- Connection Status -->
            <div class="panel">
                <h3>Connection</h3>
                <div id="connection-status" class="connection-status disconnected">
                    Disconnected
                </div>
            </div>
            
            <!-- Game Controls -->
            <div class="panel">
                <h3>Game Controls</h3>
                <div class="game-controls" id="game-controls">
                    <div class="input-group">
                        <label for="playerName">Player Name</label>
                        <input type="text" id="playerName" placeholder="Enter your name" value="Player1">
                    </div>
                    
                    <button onclick="createGame()" id="createGameBtn">Create New Game</button>
                    
                    <div class="input-group">
                        <label for="gameId">Game ID</label>
                        <input type="text" id="gameId" placeholder="Enter game ID to join">
                    </div>
                    
                    <button onclick="joinGame()" id="joinGameBtn">Join Game</button>
                    
                    <button onclick="startGame()" id="startGameBtn" style="display: none;">Start Game</button>
                </div>
                
                <!-- Game Lobby Status -->
                <div class="lobby-status" id="lobbyStatus" style="display: none;">
                    <div class="lobby-header">
                        <h4>Game Lobby</h4>
                        <div class="lobby-info">
                            <span id="lobby-game-id"></span>
                        </div>
                    </div>
                    <div class="player-count-status">
                        <span id="player-count-display">0/4 players</span>
                        <span id="lobby-status-text" class="status-waiting">Waiting for players...</span>
                    </div>
                    <div class="player-list">
                        <h5>Players:</h5>
                        <ul id="player-list" class="players-joined">
                            <!-- Players will be added dynamically -->
                        </ul>
                    </div>
                    <div class="lobby-requirements" id="lobby-requirements">
                        <p class="requirement-text">Need at least 2 players to start</p>
                    </div>
                </div>
            </div>
            
            <!-- Player Status -->
            <div class="panel player-status" id="player-status" style="display: none;">
                <div class="player-header">
                    <span id="player-name">Player Name</span>
                    <span id="turn-indicator" style="float: right;">‚è≥</span>
                </div>
                <div class="player-stats">
                    <div class="stat">
                        <span>Disorder:</span>
                        <span id="disorder-value">0</span>
                    </div>
                    <div class="stat">
                        <span>Floor:</span>
                        <span id="floor-value">2</span>
                    </div>
                    <div class="stat">
                        <span>Position:</span>
                        <span id="position-value">(0,0)</span>
                    </div>
                    <div class="stat">
                        <span>Movement:</span>
                        <span id="movement-value">0/0</span>
                    </div>
                </div>
            </div>
        </div>
        
        <!-- Center Panel: Game Board -->
        <div class="center-panel">
            <div class="panel" style="flex: 1;">
                <h3>Game Board</h3>
                <div class="board-controls">
                    <div class="floor-controls">
                        <button onclick="changeFloor(-1)" id="floorDownBtn" class="floor-btn">‚¨áÔ∏è Floor Down</button>
                        <div class="floor-indicator">
                            <span id="current-floor">Floor 2</span>
                        </div>
                        <button onclick="changeFloor(1)" id="floorUpBtn" class="floor-btn">‚¨ÜÔ∏è Floor Up</button>
                    </div>
                    
                    <div class="game-info">
                        <div class="info-badge">
                            <span class="info-label">Phase:</span>
                            <span id="game-phase" class="info-value">Waiting</span>
                        </div>
                        <div class="info-badge">
                            <span class="info-label">Round:</span>
                            <span id="game-round" class="info-value">0</span>
                        </div>
                    </div>
                </div>
                <div id="game-board" class="game-board">
                    <div class="board-message">
                        Create or join a game to see the board
                    </div>
                </div>
            </div>
        </div>
        
        <!-- Right Panel: Actions & Game Info -->
        <div class="right-panel">
            <!-- Action Buttons -->
            <div class="panel">
                <h3>Actions</h3>
                <div id="action-buttons" class="action-buttons">
                    <p style="color: #888; text-align: center;">Join a game to see actions</p>
                </div>
            </div>
            
            <!-- Player Hand -->
            <div class="panel">
                <h3>Your Hand (<span id="hand-count">0</span>/7)</h3>
                <div id="player-hand" class="player-hand">
                    <p style="color: #888; text-align: center;">No cards</p>
                </div>
            </div>
            
            <!-- Game Log -->
            <div class="panel" style="flex: 1;">
                <h3>Game Log</h3>
                <div id="game-log" class="game-log">
                    <p style="color: #888;">Waiting for game events...</p>
                </div>
            </div>
        </div>
    </div>
    
    <!-- Dice Animation Container -->
    <div id="dice-container" class="dice-container">
        <div class="dice-backdrop"></div>
        <div class="dice-rolling-area">
            <div id="dice-display">
                <!-- Dice will be dynamically added here -->
            </div>
            <div class="dice-result-display">
                <div id="dice-result-title" class="dice-result-title">Rolling...</div>
                <div id="dice-result-value" class="dice-result-value">?</div>
                <div id="player-order-display" class="player-order-display" style="display: none;">
                    <div class="player-order-title">üéØ Turn Order Determined!</div>
                    <ul id="player-order-list" class="player-order-list">
                        <!-- Player order items will be added dynamically -->
                    </ul>
                </div>
                <button id="dice-close-btn" class="dice-close-btn" onclick="closeDiceDisplay()" style="display: none;">
                    Continue
                </button>
            </div>
        </div>
    </div>

    <!-- Dice Display Panel (for in-game current roll display) -->
    <div id="in-game-dice-panel" class="dice-display-panel" style="display: none; position: fixed; top: 20px; right: 20px; z-index: 999;">
        <h4 style="margin: 0 0 10px 0; color: #4fd1c7;">üé≤ Current Roll</h4>
        <div class="current-dice-roll">
            <div id="current-mini-dice" class="mini-dice">?</div>
            <span class="dice-roll-text">Movement:</span>
            <span id="current-roll-value" class="dice-roll-value">0</span>
        </div>
    </div>

    <script src="game.js"></script>
    
    <!-- Developer Note: Test dice animations with these console commands:
         testDiceRoll('d6', 3) - Test D6 movement roll with result 3
         testDiceRoll('d12', 12) - Test D12 roll with result 12
         testPlayerOrderDice() - Test player order determination with multiple players
    -->
</body>
</html>